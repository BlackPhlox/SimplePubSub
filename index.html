<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Simple Pub/Sub</title>

    <script>document.write(`<script src="${location.protocol}//${location.host}/faye/client.js"><\/script>`)</script>
    <script type="text/javascript">
      
      window.onload = () => {
        client = new Faye.Client(`${location.protocol}//${location.host}/faye`);

        client.subscribe('/messages', (message) => {
            alert('Got a message: ' + message.text);
        });

        //Wait a bit for the loading to complete
        setTimeout(() => {
          client.publish('/messages', {
            text: 'Hello world'
          });
        }, 1000);
      }
      
    </script>
    <style> body {padding: 0; margin: 0;} canvas {vertical-align: top;} </style>
  </head>
  <body>
  </body>
</html>
